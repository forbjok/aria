<template>
  <require from="./chat"></require>
  <require from="./roomcontrols"></require>
  <div ref="room" class="room">
    <div ref="chatContainer" id="chatcontainer" class="chatcontainer">
      <chat room.bind="roomName"></chat>
    </div>
    <div ref="contentContainer" id="content-container" class="contentcontainer">
      <div if.bind="content.type == 'unknown'" class="video-container">
        <video
          controls
          ref="embeddedVideo"
          class="video-container video-js"
          src.bind="content.url"
          play.trigger="onPlay()"
          playing.trigger="onPlaying()"
          pause.trigger="onPause()"
          seeked.trigger="onSeek()"
        >
          <source repeat.for="source of sources" src.bind="source.url" type.bind="source.mediaType" />
        </video>
      </div>
      <div if.bind="content.type == 'youtube'" class="video-container youtube-player">
        <div ref="youtubePlayer" class="video-container"></div>
      </div>
      <div if.bind="content.type == 'google_drive'" class="video-container">
        <video
          controls
          id="google-drive-video"
          ref="googleDriveVideo"
          class="video-container video-js"
          play.trigger="onPlay()"
          playing.trigger="onPlaying()"
          pause.trigger="onPause()"
          seeked.trigger="onSeek()"
        >
          <source repeat.for="source of sources" src.bind="source.url" type.bind="source.mediaType" />
        </video>
      </div>
      <div class="usercontrols-activationzone">
        <div class="usercontrols">
          <a href="#" class="usercontrol" title="Reload" click.trigger="reloadContent()"
            ><span class="fa fa-refresh"></span
          ></a>
          <a href="#" class="usercontrol" title="Fullscreen" click.trigger="toggleFullscreen()"
            ><span class="fa fa-television"></span
          ></a>
        </div>
      </div>
      <div class="admincontrols">
        <button type="button" name="controlpanel" click.trigger="toggleRoomControls()">
          <span class="fa fa-wrench"></span>
        </button>
      </div>
    </div>
    <div if.bind="showRoomControls" class="roomcontrols-container">
      <div class="overlay" click.trigger="toggleRoomControls()"></div>
      <room-controls class="dialog"></room-controls>
    </div>
  </div>
</template>
