<template>
  <require from="/styles/chat.css"></require>
  <require from="/styles/chat-dark.css"></require>
  <require from="./valueconverters/formattime"></require>
  <require from="./valueconverters/formatpost"></require>
  <div id="chatContainer" class="chatContainer">
    <div id="postContainer" class="postContainer">
      <ul style="list-style-type: none; padding: 0px; margin: 0px;">
        <li class="post" style="" repeat.for="post of posts">
          <div class="postHeader">
            <span class="time">${post.time | formatTime}</span>
            <span class="name">${post.name}</span>
          </div>
          <div class="postBody">
          <a if.bind="post.image" class="image" href.bind="post.image" target="_blank">
            <img class="thumbnail" src.bind="post.thumbnail" alt="Image">
          </a>
          <span class="message" innerHTML.bind="post.message | formatPost"></span>
          </div>
        </li>
      </ul>
    </div>

    <div id="chatControls" class="chatControls">
      <form id="postForm" submit.delegate="submitPost()">
        <table class="postTable">
          <tr>
            <td>Name</td>
            <td><input name="name" type="text" value.bind="post.name" placeholder="Anonymous"></td>
          </tr>
          <tr>
            <td>Message</td>
            <td><textarea name="message" value.bind="post.message" maxlength="600" class="postMessageTextarea" wrap="soft"></textarea></td>
          </tr>
          <tr>
            <td>Image</td>
            <td><input name="image" type="file" accept="image/*" change.delegate="imageSelected($event)"></td>
          </tr>
          <tr>
            <td></td>
            <td><button type="submit">Post</button></td>
          </tr>
        </table>
      </form>
    </div>
  </div>
</template>
