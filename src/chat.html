<template>
  <require from="/styles/chat.css"></require>
  <require from="./valueconverters/dateformat"></require>
  <require from="./valueconverters/postformat"></require>
  <div id="chatContainer" class="chatContainer">
    <div id="postContainer" class="postContainer">
      <ul style="list-style-type: none; padding: 0px; margin: 0px;">
        <li class="post" style="" repeat.for="post of posts">
          <div class="postHeader">
            <span class="time">${post.time | dateFormat}</span>
            <span class="name">${post.name}:</span>
          </div>
          <div class="postBody">
          <a if.bind="post.image" class="image" href.bind="post.image" target="_blank">
            <img class="thumbnail" src.bind="post.thumbnail" alt="Image">
          </a>
          <span class="message" innerHTML.bind="post.message | postFormat"></span>
          </div>
        </li>
      </ul>
    </div>

    <div id="chatControls" class="chatControls">
      <form id="postForm" submit.delegate="post()">
        <iframe name="postframe" style="display: none;"></iframe>
        <table class="postTable">
          <tr>
            <td>Name</td>
            <td><input name="name" type="text" placeholder="Anonymous"></td>
          </tr>
          <tr>
            <td>Message</td>
            <td><textarea name="message" class="postMessageTextarea" wrap="soft"></textarea></td>
          </tr>
          <tr>
            <td>Image</td>
            <td><input name="image" type="file"></td>
          </tr>
          <tr>
            <td></td>
            <td><input type="submit" value="Post"></td>
          </tr>
        </table>
      </form>
    </div>
  </div>
</template>
